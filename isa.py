# Каждая инструкция занимает 1 байт

OPCODES = {
    "NOP":  0x00,   # ничего не делает
    "HALT": 0x01,   # остановка программы
    "PUSH0":0x02,   # положить 0 в стек
    "PUSH1":0x03,   # положить 1 в стек
    "ADD":  0x04,   # сложение двух верхних элементов стека
    "SUB":  0x05,   # вычитание
    "MUL":  0x06,   # умножение
    "DUP":  0x07,   # дублировать верхний элемент стека
    "SWAP": 0x08,   # поменять местами два верхних элемента
    "POP":  0x09,   # убрать верхний элемент стека
    "NEXT": 0x0A,   # считать следующий элемент из памяти данных
    "SETIP":0x0B,   # установить IP
    "JZ":   0x0C,   # переход, если ноль (1 байт смещения со знаком)
    "JMP":  0x0D,   # безусловный переход (1 байт смещения со знаком)
    "LT":   0x0E,   # сравнение "меньше"
    "OUT":  0x0F,   # вывод значения
}

def to_signed_byte(n: int) -> int:
    """Ограничить значение до диапазона знакового 8-битного числа (-128..127),
    представить в виде байта от 0 до 255."""
    if not -128 <= n <= 127:
        raise ValueError(f"Смещение перехода вне диапазона (-128..127): {n}")
    return n & 0xFF
